KISSY.add("gallery/couple-select/1.0/couple-select",function(c){function f(a,b){b=c.merge(f.Config,b);this.container=c.get(a);this.config=b;this._init()}var d=c.DOM,e=c.Event;c.augment(f,c.EventTarget,{_init:function(){var a=this;a.source=c.get(".source",a.container);a.target=c.get(".target",a.container);a.options=c.query(".option",a.source);c.each(a.options,function(b){a._sourceOptionEvent(b);d.hasClass(b,"selected")&&a.addOption(b)});a._bindButtonEvent()},addOption:function(a){var b=a.cloneNode(!0);
d.hide(a);d.addClass(a,"selected");this._targetOptionEvent(b);this.target.appendChild(b);this.fire("add",{target:b,id:d.attr(b,"data-id"),text:d.text(b)});this.fire("change",{selected:this.getSelected()})},removeOption:function(a){var b=d.attr(a,"data-id"),g=d.text(a);a.parentNode.removeChild(a);c.each(this.options,function(a){if(d.attr(a,"data-id")==b)return d.show(a),d.removeClass(a,"selected"),!1});this.fire("remove",{id:b,text:g});this.fire("change",{selected:this.getSelected()})},add:function(a){var b=
this;options=a?c.filter(b.options,function(a){return d.hasClass(a,"select")}):c.filter(b.options,function(a){return"none"!=a.style.display});c.each(options,function(a){d.removeClass(a,"select");b.addOption(a)})},remove:function(a){var b=this,e=c.query(".option",b.target),a=a?c.filter(e,function(a){return d.hasClass(a,"select")}):e;c.each(a,function(a){d.removeClass(a,"select");b.removeOption(a)})},getSelected:function(){var a=[];c.each(c.query(".option",this.target),function(b){a.push([d.attr(b,"data-id"),
d.text(b)])});return a},_sourceOptionEvent:function(a){var b=this;e.on(a,"click",function(){d.toggleClass(a,"select")});e.on(a,"dblclick",function(){b.addOption(a)})},_targetOptionEvent:function(a){var b=this;e.on(a,"click",function(){d.toggleClass(a,"select")});e.on(a,"dblclick",function(){b.removeOption(a)})},_bindButtonEvent:function(){var a=this;e.on(c.query(".J_add",a.container),"click",function(){a.add(".select")});e.on(c.query(".J_remove",a.container),"click",function(){a.remove(".select")});
e.on(c.query(".J_addall",a.container),"click",function(){a.add()});e.on(c.query(".J_removeall",a.container),"click",function(){a.remove()})}});return f});KISSY.add("gallery/couple-select/1.0/index",function(c,f){return f},{requires:["./couple-select"]});
