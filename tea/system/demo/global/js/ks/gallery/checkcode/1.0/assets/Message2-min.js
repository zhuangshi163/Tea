KISSY.add("Message2",function(c){var d=function(a,b){this.title=(this.msg=c.one(a))&&this.msg.one(".msg-tit");this.content=this.msg&&this.msg.one(".msg-cnt");this.source=c.isPlainObject(b)?b:null;this.type=this._getType()};c.augment(d,{change:function(a,b){if(!this.msg)return this;this.show();a=a&&a.toUpperCase()||"";switch(a){case "OK":case "ERROR":case "TIPS":case "NOTICE":case "ATTENTION":case "QUESTION":case "STOP":this._changeType(a)}this.type=this._getType();this._changeText(b);return this},
_changeType:function(a){var b=this.msg.attr("class"),c=/\bmsg-ok\b|\bmsg-error\b|\bmsg-tips\b|\bmsg-notice\b|\bmsg-attention\b|\bmsg-question\b|\bmsg-stop\b/g;b.match(c)?this.msg.attr("class",b.replace(c,"msg-"+a.toLowerCase())):this.msg.addClass("msg-"+a.toLowerCase())},_changeTitle:function(a){this.title&&c.isString(a)&&this.title.html(a)},_changeContent:function(a){this.content&&c.isString(a)&&this.content.html(this.source?this.source[a]||"":a)},_changeText:function(a){var b=c.isObject(a)&&c.isString(a.title)?
a.title:"",a=c.isObject(a)&&c.isString(a.content)?a.content:c.isString(a)?a:"";this._changeTitle(b);this._changeContent(a);!b&&!a&&this.msg&&this.msg.addClass("msg-weak")},ok:function(a){this.change("ok",a);return this},error:function(a){this.change("error",a);return this},tips:function(a){this.change("tips",a);return this},notice:function(a){this.change("notice",a);return this},attention:function(a){this.change("attention",a);return this},question:function(a){this.change("question",a);return this},
stop:function(a){this.change("stop",a);return this},weak:function(){this.msg.replaceClass("msg","msg-weak");this.msg.replaceClass("msg-b","msg-b-weak")},_getType:function(){var a="",b=this.msg.attr("class");b.match(/\bmsg-(b-)?error\b/)?a="ERROR":b.match(/\bmsg-(b-)?-tips\b/)?a="TIPS":b.match(/\bmsg-(b-)?-attention\b/)?a="ATTENTION":b.match(/\bmsg-(b-)?-notice\b/)?a="NOTICE":b.match(/msg-ok|msg-b-ok/)?a="OK":b.match(/\bmsg-(b-)?-question\b/)?a="QUESTION":b.match(/\bmsg-(b-)?-stop\b/)&&(a="STOP");
return a},isHide:function(){return"hidden"==this.msg.css("visibility")||"none"==this.msg.css("display")},hide:function(){this.msg.css("visibility","hidden").removeClass("show").addClass("hide");return this},show:function(){this.msg.css("visibility","visible").removeClass("hide").addClass("show");return this},laterHide:function(a){c.later(this.hide,a,!1,this);return this}});return function(a,b){return new d(a,b)}});
