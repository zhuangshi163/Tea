KISSY.add("gallery/combine/1.0/index",function(b){function o(){return p?d["*"]=!0:d["*"]=!1}function w(a){var e=a.concat();b.each(a,function(a){(a=q[a])&&b.isArray(a)&&(e=e.concat(a))});return e}function x(a){var e=b.Env.mods;return!(r[a]||a in e)}function y(a,e,c){var a=w(a),f;c||(f=b.filter(a,function(a){return 0<a.indexOf(".css")}));f&&f.length&&(a=b.filter(a,function(a){return-1===a.indexOf(".css")}),h(f,e,!0));return b.filter(a,x)}function h(a,e,c){var a=y(a,e,c),f={};f[s]={path:z,tag:b.buildTime,
mods:[]};for(var c=b.Config.packages||b.__packages,k=0;k<a.length;k++){var g=a[k],i=!1;0<g.indexOf("/")&&b.each(c,function(a,b){var c=a.path;f[b]||(f[b]={path:c,tag:a.tag||"",mods:[]});if(0===g.indexOf(b)&&(e||d["*"]||d[b]))f[b].mods.push(g),i=!0});(e||d["*"]||d["*"])&&!i&&f[s].mods.push(g);r[g]=!0}b.each(f,A)}function A(a){var e=a.mods,c=a.path;if(1<e.length){var f=0<e[0].indexOf(".css"),d=a.tag?"?t="+a.tag:"",a=B(c,d,f),g=a(e,!1),g=t(g,e,a),i=0;b.each(g,function(a,b){for(;i<b;i++)j[c+e[i]+(f?"":
".js")+d]=a});f||(g=a(e,!0),a=t(g,e,a),i=0,b.each(a,function(a,b){for(;i<b;i++)j[c+e[i]+"-min.js"+d]=a}))}}function t(a,b,c){function f(a,d,h){if(d+1<h)for(var a=Math.ceil(a.length/m),h=Math.ceil((h-d)/a),k=0;k<a;){var j=k*h+d,n=j+h,l=b.slice(j,n),l=c(l,i);l.length>m?f(l,j,n):g[n]=l;k++}else g[h]=a}var d=a.length,g={},i=-1<a.indexOf("-min.js"),h=b.length;d>m?f(a,0,h-1):g[h]=a;return g}function B(a,b,c){return function(f,d){var g=c?"":d?"-min.js":".js";return a+"??"+f.join(g+",")+g+b}}if(0!==b.version.indexOf("1.2"))return{config:function(){}};
var C=b.use,D=b.add,E=b.__getMappedPath,s="default",m=2042,j={},q={},p=!1,r={},d={"*":!1,allPackageNumber:0},z=b.Config.base;b.use=function(a,b,c){if(o()||d.allPackageNumber){var f=a.replace(/\s+/g,"").split(",");h(f)}return C.call(this,a,b,c)};b.add=function(a,e,c){if(o()||d.allPackageNumber)c&&c.requires?1<c.requires.length&&h(c.requires):b.isPlainObject(a)&&b.each(a,function(a){a.requires&&a.requires.length&&h(a.requires)});return D.call(this,a,e,c)};b.__getMappedPath=function(a){return j[a]||
E(a)};var u=function(a){return function(e){b.each(e,a)}},v={autoCombine:function(a){p=!!a},packages:u(function(a){d[a]=!0;d.allPackageNumber++}),requires:function(a){b.each(a,function(a,c){b.isArray(a)&&(q[c]=a)})},mods:u(function(a){h(a,!0)})};return{removePackage:function(a){delete d[a];d.allPackageNumber--},config:function(a){b.each(a,function(a,c){if(b.isFunction(v[c]))v[c](a)})},getMap:function(){return j}}});
