KISSY.add("gallery/form/1.1/radio/index",function(h,l,m){function f(a,b){b=h.merge({target:a},b);f.superclass.constructor.call(this,b)}var c=l.all;h.extend(f,m,{render:function(){this._loadCss();this._replaceKfbtn();this._bindEvent()},recoverKfbtn:function(){var a=this.get("target"),b=this.get("kfbtn");c(b).each(function(b,d){b.hide();c(a[d]).show()});return this},_replaceKfbtn:function(){var a=this,b=a.get("target"),e=a._getHtml(0),d=a._getHtml(2),n=a._getHtml(1),g,j=[],o=a.get("accessible"),k=a.get("getLabelFunc"),
f;if(0===b.length)return!1;b.each(function(b){b.hide();a._isDisabled(b)?g=c(d).insertBefore(b).attr("ks-kfbtn-disabled","disabled").removeAttr("tabindex"):(g=a._isSelected(b)?c(n):c(e),g.insertBefore(b));if(o)try{f=k?k(b).text():b.next("label").text(),g.attr("aria-label",f)}catch(l){return h.log("html结构不符合"),!1}j.push(g)});a.set("kfbtn",j)},_loadCss:function(){var a=this.get("cssUrl");""!==a&&h.use(a,function(){})},_getHtml:function(a){var b=this.get("cls"),c=b.selected,d=b.disabled,b={defalutName:b.init};
switch(a){case 0:b.secondName="";break;case 1:b.secondName=c;break;case 2:b.secondName=d}return h.substitute('<span tabindex="0" class="{defalutName} {secondName}"></span>',b)},_bindEvent:function(){var a=this,b=c(a.get("kfbtn")),e=this.get("cls").hover,d=a.get("hasLabel"),f=a.get("target"),g=a.get("getLabelFunc"),j;b.each(function(b,k){b.on("mouseenter mouseleave",function(c){if(!a._isSelected(b)&&!a._isDisabled(b))switch(c.type){case "mouseenter":b.addClass(e);break;case "mouseleave":b.removeClass(e)}}).on("click",
function(){a._isDisabled(b)||a._clickHandler.call(a,k)}).on("keyup",function(a){13===a.keyCode&&b.fire("click")});if(d)try{j=g?g(c(f[k])):b.next("label"),j.on("click",function(){b.fire("click")}).on("mouseenter",function(){b.fire("mouseenter")}).on("mouseleave",function(){b.fire("mouseleave")})}catch(l){return h.log("html结构不符合"),!1}})},_clickHandler:function(a){var b=this.get("target"),e=c(this.get("kfbtn"));kfbtn=c(this.get("kfbtn")[a]);getCls=this.get("cls");selectedClass=getCls.selected;hoverClass=
getCls.hover;c(b[a]).fire("click");e.each(function(a){a.removeClass(selectedClass).removeClass(hoverClass)});kfbtn.addClass(selectedClass)},_isDisabled:function(a){var b=c(a).attr("disabled"),a=c(a).attr("ks-kfbtn-disabled");return"disabled"===b||"disabled"===a},_isSelected:function(a){var b=c(a).prop("checked"),a=c(a).hasClass(this.get("cls").selected);return b||a},setDisabled:function(a){var b=this.get("kfbtn"),e=this.get("target"),d=this.get("cls"),f=d.selected,g=d.disabled,d=d.hover;"number"===
typeof a&&(b=c(b[a]),a=c(e[a]),b.attr("ks-kfbtn-disabled","disabled").removeClass(f+" "+d).addClass(g),a.attr("disabled","disabled"),b.removeAttr("tabindex"));return this},setAvailabe:function(a){var b=this.get("kfbtn"),e=this.get("target"),d=this.get("cls").disabled;h.isNumber(a)&&(b=c(b[a]),a=c(e[a]),b.removeAttr("ks-kfbtn-disabled","disabled").removeClass(d),a.removeAttr("disabled","disabled"),b.attr("tabindex","0"));return this},getSelected:function(a){var b=this.get("target"),e,d=[];i=0;for(len=
b.length;i<len;i++)if(e=c(b[i]),!this._isDisabled(e)&&this._isSelected(e)){if(!a)return i;d.push(i)}return a?d:null}},{ATTRS:{target:{value:"",setter:function(a){return c(a)},getter:function(a){return c(a)}},kfbtn:{value:[]},cls:{value:{init:"ks-radio",selected:"ks-radio-selected",disabled:"ks-radio-disabled",hover:"ks-radio-hover"}},cssUrl:{value:"gallery/form/1.1/radio/themes/default/style.css"},hasLabel:{value:!1},getLabelFunc:{value:void 0,setter:function(a){return a},getter:function(a){return a}},
accessible:{value:!1}}});return f},{requires:["node","base"]});
