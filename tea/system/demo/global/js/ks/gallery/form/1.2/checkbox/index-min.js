KISSY.add("gallery/form/1.2/checkbox/index",function(g,l,m,n){function f(a,b){b=g.merge({target:a},b);f.superclass.constructor.call(this,b)}var c=m.all;g.extend(f,n);g.extend(f,l,{selectAll:function(){var a=this,b=a.get("kfbtn"),d=a.get("target");c(b).each(function(b,h){!a._isSelected(b)&&!a._isDisabled(b)&&(b.addClass(a.get("cls").selected),c(d[h]).prop("checked",!0))});return a},resetAll:function(){var a=this,b=a.get("kfbtn"),d=a.get("cls").selected;a.get("cls");var e=a.get("target");c(b).each(function(b,
j){a._isSelected(b)&&(b.removeClass(d),c(e[j]).prop("checked",!1))});return a},_clickHandler:function(a){var b=this.get("target"),d=this.get("kfbtn"),e=this.get("cls").selected;c(b[a]).fire("click");c(d[a]).toggleClass(e)},getAllChecked:function(){var a=this.get("target"),b=[];i=0;for(len=a.length;i<len;i++)this._isSelected(c(a[i]))&&!this._isDisabled(c(a[i]))&&b.push(i);return b},_labelHandler:function(a,b){var d=this,e,h=d.get("target"),j=c(d.get("kfbtn")),k=d.get("cls"),f=k.selected,g=k.hover;
e=(k=d.get("getLabelFunc"))?k(c(h[a])):b.next("label");e.on("click",function(){d._isDisabled(j[a])||(e.contains(b)&&b.detach("click"),d._isSelected(h[a])?(b.removeClass(f),c(h[a]).prop("checked",!1)):(b.addClass(f),c(h[a]).prop("checked",!0)))}).on("mouseenter",function(){!d._isDisabled(j[a])&&!d._isSelected(j[a])&&(e.contains(b)&&b.detach("mouseenter"),b.addClass(g))}).on("mouseleave",function(){d._isDisabled(j[a])||(e.contains(b)&&b.detach("mouseleave"),b.removeClass(g))})},_bindEvent:function(){var a=
this,b=c(a.get("kfbtn")),d=this.get("cls").hover,e=a.get("hasLabel");a.get("target");a.get("getLabelFunc");b.each(function(b,c){b.on("mouseenter mouseleave",function(c){if(!a._isSelected(b)&&!a._isDisabled(b))switch(c.type){case "mouseenter":b.addClass(d);break;case "mouseleave":b.removeClass(d)}}).on("click",function(){a._isDisabled(b)||a._clickHandler.call(a,c)}).on("keyup",function(a){13===a.keyCode&&b.fire("click")});e&&a._labelHandler(c,b)})}},{ATTRS:{target:{value:"",setter:function(a){return c(a)},
getter:function(a){return c(a)}},kfbtn:{value:[]},cls:{value:{init:"ks-checkbox",selected:"ks-checkbox-checked",disabled:"ks-checkbox-disabled",hover:"ks-checkbox-hover"}},cssUrl:{value:"gallery/form/1.2/checkbox/themes/default/style.css"},hasLabel:{value:!1},getLabelFunc:{value:void 0,setter:function(a){return a},getter:function(a){return a}},accessible:{value:!1}}});return f},{requires:["base","node","gallery/form/1.2/radio/index"]});
