KISSY.add("gallery/input-cursor/1.0/index",function(g,c){function k(a){var b=f,d;b||(b=c.create(l));"textarea"==a.type?c.css(b,"width",c.css(a,"width")):c.css(b,"width",9999);g.each(m,function(d){c.css(b,d,c.css(a,d))});f||(d=a.ownerDocument.body,d.insertBefore(b,d.firstChild));return f=b}var l="<div style='z-index:-9999;overflow:hidden;position: fixed;left:-9999px;top:-9999px;opacity:0;white-space:pre-wrap;word-wrap:break-word;'></div>",f,m="paddingLeft,paddingTop,paddingBottom,paddingRight,marginLeft,marginTop,marginBottom,marginRight,borderLeftStyle,borderTopStyle,borderBottomStyle,borderRightStyle,borderLeftWidth,borderTopWidth,borderBottomWidth,borderRightWidth,line-height,outline,height,fontFamily,fontSize,fontWeight,fontVariant,fontStyle".split(","),
j,h;h=function(){var a=document,b=c.create("<input>");c.css(b,{width:1,position:"absolute",left:-9999,top:-9999});b.value="123456789";a.body.appendChild(b);b.focus();j=!!(0<b.scrollLeft);c.remove(b);h=g.noop};return function(a){var b=a.ownerDocument,d=a.scrollTop,f=a.scrollLeft;if(b.selection)return b=b.selection.createRange(),{left:b.boundingLeft+f+c.scrollLeft(),top:b.boundingTop+d+b.boundingHeight+c.scrollTop()};h();var e=c.offset(a);if(!j&&"textarea"!=a.type)return e.top+=a.offsetHeight,e;var i=
k(a),b=a.selectionStart;i.innerHTML=g.escapeHTML(a.value.substring(0,b-1))+"<span>x</span>";c.offset(i,e);e=i.lastChild;a=c.offset(e);a.top+=c.height(e);0<b&&(a.left+=c.width(e));a.top-=d;a.left-=f;return a}},{requires:["dom"]});
