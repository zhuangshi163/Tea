KISSY.add("gallery/random-show/1.0/index",function(g,h,a){return{RandomRegion:h,RandomShow:a}},{requires:["./random-region","./random-show"]});
KISSY.add("gallery/random-show/1.0/random-region",function(g){function h(a){this.width=a.width;this.height=a.height;this.sizes=a.sizes;this.regions=[]}g.augment(h,{_initSizes:function(a){var e=[],c=a,f,b;if(!g.isArray(this.sizes)){for(f=this.sizes.minRatio;c--;)b=f+(1-f)*c/(a-1),e.push({width:this.sizes.baseWidth*b,height:this.sizes.baseHeight*b});this.sizes=e}},isCross:function(a){for(var e=this.regions.length,c,f=!1;e--;)if(c=this.regions[e],!(a.left>c.right+2||a.right<c.left-2||a.bottom<c.top-
2||a.top>c.bottom+2)){f=!0;break}return f},randRegion:function(a){for(var e=1E3,c=this.width-a.width-1,f=this.height-a.height-1,b,d;e--;)if(b=Math.round(Math.random()*c),d=Math.round(Math.random()*f),b={left:b,top:d,right:b+a.width,bottom:d+a.height},!this.isCross(b))return b},getRegions:function(a){var e=1,c,f;this._initSizes(a);for(c=0;c<a;c++)(f=this.randRegion(this.sizes[c],c+1))?this.regions.push(f):6>e?(g.log(["retry",e]),e++,this.regions=[],c=-1):(g.log("hide","warn"),this.regions.push({left:-9999,
top:-9999,right:-9999,bottom:-9999}));return this.regions}});return h});
KISSY.add("gallery/random-show/1.0/random-show",function(g,h){function a(a,b){var a=g.get(a),b=b||{},d=e.children(a),i={width:b.width||a.clientWidth,height:b.height||a.clientHeight,sizes:b.sizes||{baseWidth:d[0].offsetWidth,baseHeight:d[0].offsetHeight,minRatio:0.6}},m=(new h(i)).getRegions(d.length),j=d[0].offsetWidth-d[0].clientWidth+parseInt(e.css(d[0],"padding-left"))+parseInt(e.css(d[0],"padding-right")),k=d[0].offsetHeight-d[0].clientHeight+parseInt(e.css(d[0],"padding-top"))+parseInt(e.css(d[0],
"padding-bottom")),l=this;l._anims=[];g.each(d,function(a,f){var b=m[f],d=b.right-b.left,h=b.bottom-b.top;e.css(a,{width:d*c-j+"px",height:h*c-k+"px",left:(b.left+i.width/2)*c+"px",top:(b.top+i.height/2)*c+"px"});l._anims.push(g.Anim(a,{width:d-j+"px",height:h-k+"px",left:b.left+"px",top:b.top+"px"}))});a.style.visibility="visible"}var e=g.DOM,c=0.5;g.augment(a,{run:function(){for(var a=this._anims.length;a--;)this._anims[a].run()},stop:function(){for(var a=this._anims.length;a--;)this._anims[a].stop()}});
return a},{requires:["./random-region"]});
