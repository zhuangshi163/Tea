KISSY.add("gallery/expose/1.0/expose",function(b){function e(a,c){this.target=b.get(a);this.config=b.merge({zindex:9998,bgcolor:"#fff",anim:1,opacity:0.8,tip:"\u53f3\u952e\u5355\u51fb\u5173\u95ed\u906e\u7f69\u6548\u679c"},c||{});this.flag=!1;this.resize=null;this._init()}var d=b.DOM,f=b.Event;b.augment(e,b.EventTarget,{_init:function(){var a=this,c=a.config,e=d.create('<div title="'+c.tip+'" style="position:absolute; z-index:'+c.zindex+"; display:none; top:0px; left:0px; background-color:"+c.bgcolor+';"></div>');b.ready(function(){document.body.appendChild(e);
f.on(e,"click",function(){a.close()})});a.mask=e;a.resize=function(){d.css(e,{width:d.docWidth(),height:d.docHeight()})}},expose:function(){var a=this,c=a.config;a.flag||(f.on(window,"resize",a.resize),a.fire("expose"),d.css(a.target,{position:"relative","z-index":c.zindex+1}),d.css(a.mask,{display:"block",width:d.docWidth(),height:d.docHeight(),opacity:0}),b.Anim(a.mask,"opacity: "+c.opacity,c.anim,"easeOutStrong",function(){b.later(function(){a.flag=!0},100)}).run())},close:function(){var a=this,
c=a.config;a.flag&&(f.remove(window,"resize",a.resize),a.fire("close"),b.Anim(a.mask,"opacity: 0",c.anim,"easeOutStrong",function(){d.hide(a.mask);d.css(a.target,{position:"static","z-index":"auto"});b.later(function(){a.flag=!1},100)}).run())}});return e});KISSY.add("gallery/expose/1.0/index",function(b,e){return e},{requires:["./expose"]});
