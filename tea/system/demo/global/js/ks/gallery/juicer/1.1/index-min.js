KISSY.add("gallery/juicer/1.1/index",function(){var a=function(){var d=[].slice.call(arguments);d.push(a.options);if(1==arguments.length)return a.compile.apply(a,d);if(2<=arguments.length)return a.to_html.apply(a,d)};window.__escapehtml={__escapehash:{"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"},__escapereplace:function(a){return __escapehtml.__escapehash[a]},__escape:function(a){return"string"!==typeof a?a:a.replace(/[&<>"]/igm,__escapehtml.__escapereplace)},__detection:function(a){return"undefined"===
typeof a?"":a}};a.__cache={};a.version="0.3.0-dev";a.settings={forstart:/{@each\s*([\w\.]*?)\s*as\s*(\w*?)(,\w*?)?}/igm,forend:/{@\/each}/igm,ifstart:/{@if\s*([^}]*?)}/igm,ifend:/{@\/if}/igm,elsestart:/{@else}/igm,interpolate:/\${([\s\S]+?)}/igm,noneencode:/\$\${([\s\S]+?)}/igm,inlinecomment:/{#[^}]*?}/igm,rangestart:/{@each\s*(\w*?)\s*in\s*range\((\d+?),(\d+?)\)}/igm};a.options={cache:!0,strip:!0,errorhandling:!0};a.set=function(a,b){this.options[a]=b};a.template=function(){var d=this;this.__interpolate=
function(b,a,e){var g=b.split("|"),h="";1<g.length&&(b=g.shift(),h=g.shift());return"<%= "+(a?"__escapehtml.__escape":"")+"("+(!e||!1!==e.detection?"__escapehtml.__detection":"")+"("+h+"("+b+"))) %>"};this.__shell=function(b,c){var e=0,b=b.replace(a.settings.forstart,function(a,b,c,f){c=c||"value";f=f&&f.substr(1);a="i"+e++;return"<% for(var "+a+"=0,l"+a+"="+b+".length;"+a+"<l"+a+";"+a+"++) {var "+c+"="+b+"["+a+"];"+(f?"var "+f+"="+a+";":"")+" %>"}).replace(a.settings.forend,"<% } %>").replace(a.settings.ifstart,
function(a,b){return"<% if("+b+") { %>"}).replace(a.settings.ifend,"<% } %>").replace(a.settings.elsestart,function(){return"<% } else { %>"}).replace(a.settings.noneencode,function(a,b){return d.__interpolate(b,!1,c)}).replace(a.settings.interpolate,function(a,b){return d.__interpolate(b,!0,c)}).replace(a.settings.inlinecomment,"").replace(a.settings.rangestart,function(a,b,c,f){a="j"+e++;return"<% for(var "+a+"=0;"+a+"<"+(f-c)+";"+a+"++) {var "+b+"="+a+"; %>"});if(!c||!1!==c.errorhandling)b="<% try { %>"+
b+'<% } catch(e) {console && console.warn("Juicer Render Exception: "+e.message);} %>';return b};this.__pure=function(a,c){return this.__convert(a,!c||c.strip)};this.__lexical=function(b){var c=[],e="",d=function(a,b){var b=b.match(/\w+/igm)[0],d;if(c.indexOf)d=c.indexOf(b);else a:{for(d=0;d<c.length;d++)if(c[d]==b)break a;d=-1}-1===d&&c.push(b)};b.replace(a.settings.forstart,d).replace(a.settings.interpolate,d).replace(a.settings.ifstart,d);for(b=0;b<c.length;b++)e+="var "+c[b]+"=data."+c[b]+";";
return"<% "+e+" %>"};this.__convert=function(a,c){var d;d="var data=data||{};var out='';out+='";return d=!1!==c?d+(a.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';out+=$1;out+='").split("<%").join("';").split("%>").join("out+='")+"';return out;"):d+(a.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,
"';out+=$1;out+='").split("<%").join("';").split("%>").join("out+='")+"';return out.replace(/[\\r\\n]\\t+[\\r\\n]/g,'\\r\\n');")};this.parse=function(a,c){if(!c||!1!==c.loose)a=this.__lexical(a)+a;a=this.__shell(a,c);a=this.__pure(a,c);this.render=new Function("data",'"use strict";'+a);return this}};a.compile=function(a,b){try{var c=this.__cache[a]?this.__cache[a]:(new this.template).parse(a,b);if(!b||!1!==b.cache)this.__cache[a]=c;return c}catch(e){return console&&console.warn("Juicer Compile Exception: "+
e.message),{render:function(){}}}};a.to_html=function(a,b,c){return this.compile(a,c).render(b)};return a});
