KISSY.add("gallery/kcharts/1.0/tip/index",function(h,i){var g=h.all,k=function(a){var b={clsName:"ks-chart-default",autoRender:!0,isVisable:!1,boundry:{x:0,y:0,width:0,height:0},rootNode:g("body"),tpl:"",anim:{easing:"easeOut",duration:0.3},offset:{x:0,y:0},alignX:"left",alignY:"top"};this._cfg=h.mix(b,a);this.init()};h.augment(k,{init:function(){var a=this._cfg;this._data={};this._tpl=a.tpl;this.$tip;this._guId=Math.round(1E8*Math.random());a.autoRender&&this.render()},getInstance:function(){return this.$tip},
isVisable:function(){return"none"==this.$tip.css("display")?!1:!0},show:function(){this.$tip&&this.$tip.show();return this},hide:function(){this.$tip&&this.$tip.stop()&&this.$tip.hide();return this},moveTo:function(a,b){this.show();var c=this.getInstance(),d=this.getPos(a,b);c.css({"margin-top":d.y,"margin-left":d.x})},animateTo:function(a,b,c){this.show();var d=this.getInstance(),e=this._cfg.anim,a=this.getPos(a,b);d.stop().animate({"margin-top":a.y,"margin-left":a.x},e.duration,e.easing,function(){c&&
c()})},renderTemplate:function(a,b){g("#J_tip_"+this._guId).html(i(a).render(b))},getPos:function(a,b){var c=this._cfg,d=c.offset,e=b+d.y,f=a+d.x,g=c.alignX,h=c.alignY,j=this.getInstance(),i=j.outerWidth(),j=j.outerHeight(),c=c.boundry;switch(g){case "center":f=Math.round(a)+d.x-i/2;break;case "right":f=Math.round(a)+d.x-i}switch(h){case "middle":e=Math.round(b)+d.y-j/2;break;case "bottom":e=Math.round(b)+d.y-j}c.width&&c.height&&(a=c.x||0,b=c.y||0,d=c.width,g=c.height,e=e<b?b:e,e=e>b+g?b+g:e,f=f<
a?a:f,f=f>a+d?a+d:f);return{x:f,y:e}},_isExist:function(){return g("#J_tip_"+this._guId)[0]},render:function(){var a=this._cfg,b=this._tpl,c=this._data,d=a.isVisable?"inline-block":"none",e="J_tip_"+this._guId,f=a.rootNode.offset();!this._isExist()&&g('<span class="'+a.clsName+'-tip" id='+e+' style="*zoom:1;"></span>').css({display:d}).appendTo(a.rootNode);g("#"+e).css({"margin-top":f.top+a.offset.y,"margin-left":f.left+a.offset.x,position:"absolute"}).html(i(b).render(c));return this.$tip=g("#"+
e)}});return k},{requires:["gallery/template/1.0/index","./assets/tip.css"]});
