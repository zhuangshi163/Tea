KISSY.add("gallery/kcharts/1.1/legend/index",function(f,l,i,k,h){function j(a){this._cfg=f.mix({themeCls:"ks-charts-legend",css:{},evtBind:!1},a);this.init()}var e=f.all,g=f.Event;f.augment(j,{init:function(){var a=this._cfg;if(a.container&&(this.$ctn=e(a.container),!this.$ctn[0]))return;this.render()},render:function(){var a=this,c=a._cfg,d=c.chart,b=d._innerContainer;a.renderIconContainer();a.$legend=e("."+c.themeCls,a.$ctn);a.renderIcon();a.$legend.css({marginLeft:b.width,marginTop:0}).css(c.css);
c.evtBind&&d.on("afterRender",function(){a.bindEvt()});f.log(a)},renderIcon:function(){var a=this._cfg.chart,c=a.chartType,d,b,f;"linechart"==c?e(".legend-icon",this.$legend).each(function(c,e){var g=a._stocks[e];d=g.color;b=i(this[0]);f=g.type;b.path("M0,5L16,5").attr({stroke:d.DEFAULT,"stroke-width":2});switch(f){case "triangle":$stock=h.triangle(b,8,6,5);break;case "rhomb":$stock=h.rhomb(b,8,5,8,8);break;case "square":$stock=h.rhomb(b,8,5,8,8,45);break;default:$stock=b.circle(8,5,3)}$stock.attr({fill:d.DEFAULT,
stroke:d.DEFAULT})}):"barchart"==c&&e(".legend-icon",this.$legend).each(function(c,e){d=a.color.getColor(e);b=i(this[0]);b.rect(0,0,10,8,2).attr({fill:d.DEFAULT,"stroke-width":"0px"})})},renderIconContainer:function(){var a=this._cfg,c=a.chart;this._html="<div class="+a.themeCls+"><ul>";for(var d in c._datas.total)this._html+=k("<li class="+(!1==c._cfg.series[d].isShow?"clearfix disable":"clearfix")+"><div class='legend-icon'></div><div class='legend-text'>{{text}}</div></li>").render(c._cfg.series[d]);
this._html+="</ul></div>";e(this._html).appendTo(this.$ctn);return this._html},destroy:function(){g.detach(e("li",_cfg.container),"click");this.$ctn.html("")},bindEvt:function(){var a=this._cfg.chart,c=a.chartType,d=this.$ctn;g.on(e("li",d),"click",function(b){var g=e(b.currentTarget).toggleClass("disable"),b=f.indexOf(b.currentTarget,e("li",d));g.hasClass("disable")?("linechart"===c&&a.hideLine(b),"barchart"===c&&a.hideBar(b)):("linechart"===c&&a.showLine(b),"barchart"===c&&a.showBar(b))});g.on(e("li",
d),"mouseenter",function(b){var g=e(b.currentTarget),b=f.indexOf(b.currentTarget,e("li",d));g.hasClass("disable")||"linechart"===c&&a.lineChangeTo(b)})}});return j},{requires:["gallery/kcharts/1.1/tools/htmlpaper/index","gallery/kcharts/1.1/raphael/index","gallery/template/1.0/index","gallery/kcharts/1.1/tools/graphtool/index","./assets/legend.css"]});
