KISSY.add("gallery/urlparser/1.0/index",function(b,c){return c},{requires:["./urlparser"]});
KISSY.add("urlparser",function(b,c){function c(a){if(!(this instanceof c))return new c(a);c.superclass.constructor.call(this,a);this.a=document.createElement("a");this.url=this.a.href=a}b.extend(c,b.Base);b.augment(c,{reset:function(){this.a.href=this.url},appendParams:function(a){"string"==typeof a?this.set("params",b.mix(this.get("params"),b.unparam(a)),"&","=",!1):"object"==typeof a&&this.set("params",b.mix(this.get("params"),a),"&","=",!1)}}).ATTRS={href:{getter:function(){return this.a.href},
setter:function(a){a&&(this.a.href=a)}},protocol:{getter:function(){return this.a.protocol},setter:function(a){a&&(this.a.protocol=a)}},host:{getter:function(){var a=this.get("port");return this.get("hostname")+(""===a?"":":"+a)},setter:function(a){a&&(this.a.host=a)}},hostname:{getter:function(){return this.a.hostname},setter:function(a){a&&(this.a.hostname=a)}},port:{getter:function(){return 80==this.a.port||0===this.a.port?"":this.a.port},setter:function(a){a&&(this.a.port=a)}},search:{getter:function(){return this.a.search},
setter:function(a){a&&(a=a.replace("?",""),this.a.href=this.get("protocol")+"//"+this.get("host")+this.get("pathname")+"?"+a+this.get("hash"))}},hash:{getter:function(){var a=this.a.href,b=a.indexOf("#");return-1!=b?a.slice(b):""},setter:function(a){a&&(this.a.hash=a)}},pathname:{getter:function(){return"/"+this.a.pathname.replace(/^\//,"")},setter:function(a){a&&(this.a.pathname=a)}},params:{getter:function(){return b.unparam(this.get("search").replace("?",""))},setter:function(a){a&&this.set("search",
b.param(a,"&","=",!1))}},segments:{getter:function(){return this.a.pathname.replace(/^\//,"").split("/")},setter:function(a){a&&(this.a.pathname=a instanceof Array?a.join("/"):a)}},relative:{getter:function(){return this.a.href.split(this.get("host"))[1]},setter:function(a){a&&(this.a.href=this.get("protocol")+"//"+this.get("host")+"/"+a.replace(/^\//,""))}}};return c});
